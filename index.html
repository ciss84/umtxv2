<!DOCTYPE html>
<html manifest="cache.appcache">
<head>
    <meta charset="UTF-8">
    <title>Host Auto Cache(FW 4.XX-5.XX)</title>
    <link rel="stylesheet prefetch" href="Style.css">
    <script>
        history.replaceState(null, null, 'index.html');
    </script>
</head>

<body>
    <!-- Titre de progression -->
    <h1 id="progress" class="titlehead">Loading.. Please Wait !!</h1>
    <hr>
    <br>
    
    <!-- Barre de progression -->
    <h1 id="myProgress">
        <div id="myBar">0%</div>
    </h1>
    
    <!-- Footer -->
    <div style="background-color:#043836; color:white; position:fixed; left:0; bottom:0; width:100%; text-align:center;">
        <font style='color:#87FF33'>Modder & Dev : </font>84Ciss - Find Me In Tweeter if you have any kind of issues !&nbsp;
        <a href="https://twitter.com/84Ciss" style='font-size:20px; text-align:center; color:yellow;'>@84Ciss</a>
        <br>
        <font style='color:#87FF33'>Special thanks : </font>*Many Many Thanks to all Contributors in PS4/PS5 Scene ∆★*
    </div>

    <!-- Gestion du cache d'application -->
    <script>
        // Vérifier l'état du cache
        if (window.applicationCache.status == 2) {
            localStorage.is755BCached = true;
        }
        
        // Événement: Début du téléchargement
        window.applicationCache.ondownloading = function() {
            document.getElementById("progress").innerHTML = "Page Caching Started!!";
            localStorage.is755BCached = false;
        };
        
        // Événement: Progression du téléchargement
        window.applicationCache.onprogress = function(a) {
            var percent = Math.round(100 * (a.loaded / a.total));
            document.getElementById("myBar").style.width = percent + "%";
            document.getElementById("myBar").innerHTML = percent + "%";
        };
        
        // Événement: Cache terminé
        window.applicationCache.oncached = function() {
            document.getElementById("progress").innerHTML = "Page Cached Successfully!!";
            localStorage.is755BCached = true;
            setTimeout(function() {
                window.location.reload("myBar");
            }, 1500);
        };
        
        // Événement: Mise à jour terminée
        window.applicationCache.onupdateready = function() {
            document.getElementById("progress").innerHTML = "Update Cache Successfully!!";
            localStorage.is755BCached = true;
            setTimeout(function() {
                window.location.reload("myBar");
            }, 1500);
        };
        
        // Événement: Pas de mise à jour
        window.applicationCache.onnoupdate = function() {
            window.location.replace("lndex.html");
        };
        
        // Événement: Erreur
        window.applicationCache.onerror = function() {
            window.location.replace("lndex.html");
        };
    </script>

    <!-- Animation de la barre de progression -->
    <script>
        var width = 0;
        
        function frame1() {
            var elem = document.getElementById("myBar");
            var i = 0;
            var id = setInterval(fra, 10);
            
            function fra() {
                if (i < 10 && width < 100) {
                    width++;
                    elem.style.width = width + "%";
                    elem.innerHTML = width + "%";
                }
                i++;
            }
        }
    </script>
</body>
</html>
